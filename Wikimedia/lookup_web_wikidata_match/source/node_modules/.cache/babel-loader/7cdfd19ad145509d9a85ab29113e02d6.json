{"remainingRequest":"/home/arihayri/Projects/GLAMpipe-rewrite/nodes/Wikimedia/lookup_web_wikidata_match/source/node_modules/babel-loader/lib/index.js!/home/arihayri/Projects/GLAMpipe-rewrite/nodes/Wikimedia/lookup_web_wikidata_match/source/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/arihayri/Projects/GLAMpipe-rewrite/nodes/Wikimedia/lookup_web_wikidata_match/source/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/arihayri/Projects/GLAMpipe-rewrite/nodes/Wikimedia/lookup_web_wikidata_match/source/src/components/DBFacet.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/arihayri/Projects/GLAMpipe-rewrite/nodes/Wikimedia/lookup_web_wikidata_match/source/src/components/DBFacet.vue","mtime":1632325376672},{"path":"/home/arihayri/Projects/GLAMpipe-rewrite/nodes/Wikimedia/lookup_web_wikidata_match/source/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/arihayri/Projects/GLAMpipe-rewrite/nodes/Wikimedia/lookup_web_wikidata_match/source/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/arihayri/Projects/GLAMpipe-rewrite/nodes/Wikimedia/lookup_web_wikidata_match/source/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/arihayri/Projects/GLAMpipe-rewrite/nodes/Wikimedia/lookup_web_wikidata_match/source/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL2FyaWhheXJpL1Byb2plY3RzL0dMQU1waXBlLXJld3JpdGUvbm9kZXMvV2lraW1lZGlhL2xvb2t1cF93ZWJfd2lraWRhdGFfbWF0Y2gvc291cmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2FyaWhheXJpL1Byb2plY3RzL0dMQU1waXBlLXJld3JpdGUvbm9kZXMvV2lraW1lZGlhL2xvb2t1cF93ZWJfd2lraWRhdGFfbWF0Y2gvc291cmNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgd2ViIGZyb20gJy4vLi4vd2ViLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdEQkZhY2V0JywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy9mYWNldF92YWx1ZXM6IFtdLAogICAgICBmYWNldHM6IFtdLAogICAgICBmaWx0ZXJzOiBbXSwKICAgICAgZmFjZXRfZGF0YToge30sCiAgICAgIGZhY2V0X3NlbGVjdGlvbnM6IHt9LAogICAgICBkYXRhOiBbXQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICAnJHBhcmVudC5zZXR0aW5ncyc6IGZ1bmN0aW9uICRwYXJlbnRTZXR0aW5ncygpIHsKICAgICAgY29uc29sZS5sb2coJ2NvbmZpZyB1cGRhdGVkJyk7CiAgICAgIHRoaXMucGFyc2VGYWNldHMoKTsKICAgICAgdGhpcy5sb2FkRmFjZXREYXRhKCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXRGYWNldFZhbHVlczogZnVuY3Rpb24gc2V0RmFjZXRWYWx1ZXModmFsdWVzKSB7CiAgICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZXMpIHsKICAgICAgICB2YXIgZmFjZXQgPSB0aGlzLmZhY2V0cy5maW5kKGZ1bmN0aW9uIChmKSB7CiAgICAgICAgICByZXR1cm4gZi5rZXkgPT09IGtleTsKICAgICAgICB9KTsKICAgICAgICBmYWNldC52YWx1ZXMgPSB2YWx1ZXM7CiAgICAgIH0KICAgIH0sCiAgICBzZXRGYWNldFNlbGVjdGlvbjogZnVuY3Rpb24gc2V0RmFjZXRTZWxlY3Rpb24oZmFjZXQsIHZhbHVlKSB7CiAgICAgIGlmIChmYWNldC5rZXkgaW4gdGhpcy5mYWNldF9zZWxlY3Rpb25zKSB7CiAgICAgICAgaWYgKHRoaXMuZmFjZXRfc2VsZWN0aW9uc1tmYWNldC5rZXldLmluY2x1ZGVzKHZhbHVlKSkgewogICAgICAgICAgLy8gcmVtb3ZlIHZhbHVlCiAgICAgICAgICB0aGlzLmZhY2V0X3NlbGVjdGlvbnNbZmFjZXQua2V5XSA9IHRoaXMuZmFjZXRfc2VsZWN0aW9uc1tmYWNldC5rZXldLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICByZXR1cm4gaXRlbSAhPT0gdmFsdWU7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5mYWNldF9zZWxlY3Rpb25zW2ZhY2V0LmtleV0ucHVzaCh2YWx1ZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHNldCh0aGlzLmZhY2V0X3NlbGVjdGlvbnMsIGZhY2V0LmtleSwgW3ZhbHVlXSk7IC8vdGhpcy5mYWNldF9zZWxlY3Rpb25zW2ZhY2V0LmtleV0gPSBbdmFsdWVdCiAgICAgIH0KICAgIH0sCiAgICBsb2FkRmFjZXREYXRhOiBmdW5jdGlvbiBsb2FkRmFjZXREYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgZmFjZXRfZmllbGRzLCBxdWVyeSwgcmVzcG9uc2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZmFjZXRfZmllbGRzID0gX3RoaXMuZmFjZXRzLm1hcChmdW5jdGlvbiAoZikgewogICAgICAgICAgICAgICAgICByZXR1cm4gZi5rZXk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHF1ZXJ5ID0gd2ViLmdldFVSTFF1ZXJ5UGFyYW1zQXNTdHJpbmcoKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIHdlYi5nZXRGYWNldFZhbHVlcyhfdGhpcy4kcGFyZW50LnNldHRpbmdzLmNvbGxlY3Rpb24sIGZhY2V0X2ZpZWxkcy5qb2luKCd8JyksIHF1ZXJ5KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX3RoaXMuZmFjZXRfZGF0YSA9IHJlc3BvbnNlLmRhdGFbMF07IC8vdGhpcy5zZXRGYWNldFZhbHVlcyhyZXNwb25zZS5kYXRhWzBdKQogICAgICAgICAgICAgICAgLy9heGlvcy5nZXQoYC9hcGkvdjIvY29sbGVjdGlvbnMvJHt0aGlzLiRwYXJlbnQuc2V0dGluZ3MuY29sbGVjdGlvbn0vZmFjZXQ/ZmllbGRzPSR7ZmFjZXRfZmllbGRzLmpvaW4oJywnKX0ke3VybH1gKS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgICAgICAgICAvL3RoaXMuZmFjZXRzID0gT2JqZWN0LmtleXMocmVzdWx0LmRhdGFbMF0pCiAgICAgICAgICAgICAgICAvL3RoaXMuZmFjZXRfZGF0YSA9IHJlc3VsdC5kYXRhWzBdCiAgICAgICAgICAgICAgICAvL3RoaXMuc2V0RmFjZXRWYWx1ZXMocmVzdWx0LmRhdGFbMF0pCiAgICAgICAgICAgICAgICAvL30pCgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBwYXJzZUZhY2V0czogZnVuY3Rpb24gcGFyc2VGYWNldHMoKSB7CiAgICAgIHRoaXMuZmFjZXRzID0gW107CgogICAgICBpZiAodGhpcy4kcGFyZW50LnNldHRpbmdzLmZpbHRlcnMpIHsKICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy4kcGFyZW50LnNldHRpbmdzLmZpbHRlcnMpLAogICAgICAgICAgICBfc3RlcDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBmID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgIGYudmFsdWVzID0gW107CgogICAgICAgICAgICBpZiAoZi5tb2RlID09ICdmYWNldCcpIHsKICAgICAgICAgICAgICB0aGlzLmZhY2V0cy5wdXNoKGYpOyAvL3RoaXMuJHNldCh0aGlzLmZhY2V0X3ZhbHVlcywgZi5rZXksIFtdKSAvLyBtYWtlIGtleSByZWFjdGl2ZQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZi5tb2RlID09ICdmaWx0ZXInKSB0aGlzLmZpbHRlcnMucHVzaChmKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICBjb25zb2xlLmxvZygnZmFjZXQgcmVzZXQnKTsKCiAgICAgIGZvciAodmFyIGZhY2V0IGluIHRoaXMuZmFjZXRfc2VsZWN0aW9ucykgewogICAgICAgIGNvbnNvbGUubG9nKGZhY2V0KTsKICAgICAgICB0aGlzLmZhY2V0X3NlbGVjdGlvbnNbZmFjZXRdID0gW107CiAgICAgIH0KCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBxdWVyeTogdGhpcy5mYWNldF9zZWxlY3Rpb25zCiAgICAgIH0pOwogICAgICB0aGlzLmxvYWRGYWNldERhdGEoKTsKICAgIH0sCiAgICB1cGRhdGVEYXRhOiBmdW5jdGlvbiB1cGRhdGVEYXRhKGZhY2V0LCBmYWNldF92YWx1ZSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpczIuc2V0RmFjZXRTZWxlY3Rpb24oZmFjZXQsIGZhY2V0X3ZhbHVlKTsKCiAgICAgICAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgcXVlcnk6IF90aGlzMi5mYWNldF9zZWxlY3Rpb25zCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBfdGhpczIubG9hZEZhY2V0RGF0YSgpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["DBFacet.vue"],"names":[],"mappings":"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","sourcesContent":["<style>\n.pointer {\n\tcursor: pointer\n}\n</style>\n\n<template>\n  <div class=\"hello\">\n\t<b-card v-for=\"facet in facets\" v-bind:key=\"facet.key\" :title=\"facet.title\">\n\t\t<b-list-group v-for=\"fdata in facet_data[facet.key]\" :key=\"fdata._id\">\n\t\t\t<b-list-group-item class=\"pointer\" @click=\"updateData(facet, fdata._id)\">{{fdata._id}} ({{fdata.count}})\n\t\t\t</b-list-group-item>\n\t\t</b-list-group>\n\n\t</b-card>\n\n\n  </div>\n</template>\n\n<script>\nimport web from './../web.js'\n\nexport default {\n\tname: 'DBFacet',\n\tdata() {\n\t\treturn {\n\t\t\t//facet_values: [],\n\t\t\tfacets: [],\n\t\t\tfilters: [],\n\t\t\tfacet_data: {},\n\t\t\tfacet_selections: {},\n\t\t\tdata: []\n\t\t}\n\t},\n\twatch: {\n\t\t'$parent.settings': function() {\n\t\t\tconsole.log('config updated')\n\t\t\tthis.parseFacets()\n\t\t\tthis.loadFacetData()\n\t\t}\n\t},\n\tmethods: {\n\t\tsetFacetValues(values) {\n\t\t\tfor(var key in values) {\n\t\t\t\tvar facet = this.facets.find(f => f.key === key)\n\t\t\t\tfacet.values = values\n\t\t\t}\n\t\t},\n\t\tsetFacetSelection(facet, value) {\n\t\t\tif(facet.key in this.facet_selections) {\n\t\t\t\tif(this.facet_selections[facet.key].includes(value)) {\n\t\t\t\t\t// remove value\n\t\t\t\t\tthis.facet_selections[facet.key] = this.facet_selections[facet.key].filter(item => item !== value)\n\t\t\t\t} else {\n\t\t\t\t\tthis.facet_selections[facet.key].push(value)\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.$set(this.facet_selections, facet.key, [value])\n\t\t\t\t//this.facet_selections[facet.key] = [value]\n\t\t\t}\n\t\t},\n\t\tasync loadFacetData() {\n\t\t\tvar facet_fields = this.facets.map(f => f.key)\n\t\t\tvar query = web.getURLQueryParamsAsString()\n\t\t\tvar response = await web.getFacetValues(this.$parent.settings.collection, facet_fields.join('|'), query)\n\t\t\tthis.facet_data = response.data[0]\n\t\t\t//this.setFacetValues(response.data[0])\n\t\t\t//axios.get(`/api/v2/collections/${this.$parent.settings.collection}/facet?fields=${facet_fields.join(',')}${url}`).then(result => {\n\t\t\t\t//this.facets = Object.keys(result.data[0])\n\t\t\t\t//this.facet_data = result.data[0]\n\t\t\t\t//this.setFacetValues(result.data[0])\n\t\t\t//})\n\t\t},\n\t\tparseFacets() {\n\t\t\tthis.facets = []\n\t\t\tif(this.$parent.settings.filters) {\n\t\t\t\tfor(var f of this.$parent.settings.filters) {\n\t\t\t\t\tf.values = []\n\t\t\t\t\tif(f.mode == 'facet') {\n\t\t\t\t\t\tthis.facets.push(f)\n\t\t\t\t\t\t//this.$set(this.facet_values, f.key, []) // make key reactive\n\t\t\t\t\t}\n\t\t\t\t\tif(f.mode == 'filter') this.filters.push(f)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\treset() {\n\t\t\tconsole.log('facet reset')\n\t\t\tfor(var facet in this.facet_selections) {\n\t\t\t\tconsole.log(facet)\n\t\t\t\tthis.facet_selections[facet] = []\n\t\t\t}\n\t\t\tthis.$router.push({ query: this.facet_selections})\n\t\t\tthis.loadFacetData()\n\t\t},\n\t\tasync updateData(facet, facet_value) {\n\t\t\tthis.setFacetSelection(facet, facet_value)\n\t\t\tthis.$router.push({ query: this.facet_selections})\n\t\t\tthis.loadFacetData()\n\t\t}\n\n\t}\n}\n\n</script>\n"],"sourceRoot":"src/components"}]}